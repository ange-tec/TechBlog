{% extends 'base.html.twig' %}
{% block title %}Liste des Articles{% endblock %}
{% block body %}
    <div class="max-w-6xl mx-auto p-6">

        <h1 class="text-4xl font-bold mb-8 text-gray-800">Bienvenue ✅</h1>

        {% if is_granted('IS_AUTHENTICATED_FULLY') %}
            <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
                {% for article in articles %}
                    <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow">

                        {% if article.image %}
                            <img src="{{ asset('uploads/' ~ article.image) }}" alt="Image de l'article" class="w-full h-48 object-cover">
                        {% endif %}

                        <div class="p-6">
                            <h2 class="text-2xl font-semibold mb-2 text-gray-800">{{ article.title }}</h2>
                            <p class="text-sm text-gray-500 mb-4">
                                Par <span class="font-medium">{{ article.user }}</span> |
                                {{ article.date|date('d/M/Y') }} |
                                Vues : {{ article.view }}
                            </p>

                            <p class="text-gray-700 mb-2">
                                <span class="font-medium">Résumé :</span> {{ article.summary }}
                            </p>
                            <p class="text-gray-700 mb-4">
                                <span class="font-medium">Contenu :</span> {{ article.content }}
                            </p>

                            <p class="text-gray-700 mb-2">
                                <span class="font-medium">Catégorie :</span> {{ article.category }}
                            </p>
                            <p class="text-gray-700 mb-2">
                                <span class="font-medium">Visible :</span> {{ article.visible ? 'Oui' : 'Non' }}
                            </p>

                            <div class="mt-4 flex justify-between items-center text-sm text-gray-500">
                                <span>Publié le : {{ article.date|date('d/M/Y') }}</span>
                                <span>Vues : {{ article.view }}</span>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded shadow-md">
                <h3 class="text-lg font-semibold text-yellow-800 mb-2">
                    Vous devez créer un compte et/ou vous connecter
                </h3>
                <a href="{{ path('app_home') }}" class="inline-block mt-2 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded shadow">
                    Page d'accueil
                </a>
            </div>
        {% endif %}

    </div>
{% endblock %}
